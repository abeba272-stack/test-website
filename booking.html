<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Termin buchen – Parrylicious Studio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Allura&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="assets/logo.jpg" />
</head>
<body>
  <header class="topbar">
    <div class="container row">
      <a class="brand" href="home.html"><img src="assets/logo.jpg" alt="Parrylicious Studio Logo" class="logo"/></a>
      <nav class="nav">
        <a href="home.html#services">Leistungen</a>
        <a href="login.html">Login</a>
        <a class="btn small" href="home.html">Zurück</a>
        <div data-profile-menu></div>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <div class="section-head">
        <h2>Termin anfragen</h2>
        <p class="muted">
          Ablauf: Service wählen → Datum/Slot auswählen → Daten eingeben → optionale Online-Anzahlung → Bestätigung per SMS/E‑Mail.
        </p>
        <p class="muted" id="bookingModeHint">Du kannst mit Login oder als Gast buchen.</p>
      </div>

      <div class="wizard">
        <div class="steps" aria-label="Buchungsschritte">
          <div class="step active" data-step="1">1 · Service</div>
          <div class="step" data-step="2">2 · Stylist</div>
          <div class="step" data-step="3">3 · Datum & Zeit</div>
          <div class="step" data-step="4">4 · Details</div>
          <div class="step" data-step="5">5 · Anzahlung</div>
        </div>

        <section class="panel" id="step1">
          <h3>Service auswählen</h3>
          <p class="muted">Preise laut Studio-Liste. Anpassungen kannst du im Admin-Panel pflegen.</p>
          <div class="grid" id="servicePicker"></div>
          <div class="row end gap">
            <button class="btn" id="toStep2" disabled>Weiter</button>
          </div>
        </section>

        <section class="panel hidden" id="step2">
          <h3>Stylist (optional)</h3>
          <p class="muted">Du kannst einen Stylisten wählen oder „Egal“ – dann weist das System automatisch zu (Kapazität: 4 Plätze).</p>
          <div class="grid" id="stylistPicker"></div>
          <div class="row between gap">
            <button class="btn ghost" data-back="1">Zurück</button>
            <button class="btn" data-next="3">Weiter</button>
          </div>
        </section>

        <section class="panel hidden" id="step3">
          <h3>Datum & Zeit</h3>
          <p class="muted">Öffnungszeiten Di–Sa 11:00–19:30. Slots werden nach Service-Dauer berechnet.</p>
          <div class="two-col">
            <div class="card">
              <div class="row between">
                <div class="muted">Kalender</div>
                <button class="btn small ghost" id="resetDate">Reset</button>
              </div>
              <div class="calendar" id="calendar"></div>
            </div>
            <div class="card">
              <div class="row between">
                <div>
                  <div class="muted">Verfügbare Zeiten</div>
                  <div class="small" id="slotHint">Wähle links ein Datum.</div>
                </div>
                <button class="btn small ghost" id="joinWaitlist">Warteliste</button>
              </div>
              <div class="slots" id="slots"></div>
            </div>
          </div>
          <div class="row between gap">
            <button class="btn ghost" data-back="2">Zurück</button>
            <button class="btn" id="toStep4" disabled>Weiter</button>
          </div>
        </section>

        <section class="panel hidden" id="step4">
          <h3>Deine Angaben</h3>
          <p class="muted">Mit Login landet die Buchung in deinem Konto. Ohne Login buchst du als Gast.</p>

          <form id="detailsForm" class="form">
            <div class="two-col">
              <label>Vorname
                <input name="firstName" required placeholder="z. B. Amina" />
              </label>
              <label>Nachname
                <input name="lastName" required placeholder="z. B. Okafor" />
              </label>
            </div>

            <div class="two-col">
              <label>Telefonnummer
                <input name="phone" required placeholder="z. B. 0176..." />
              </label>
              <label>E‑Mail
                <input name="email" type="email" required placeholder="z. B. name@mail.de" />
              </label>
            </div>

            <label>Adresse
              <input name="address" required placeholder="Straße, Hausnummer, PLZ, Ort" />
            </label>

            <label>Hinweise / Haarzustand (optional)
              <textarea name="notes" placeholder="z. B. nicht frisch gewaschen, sehr dickes Haar, Wunsch-Style, Allergien …"></textarea>
            </label>

            <label class="checkbox">
              <input type="checkbox" name="privacy" required />
              <span>Ich stimme der Verarbeitung meiner Daten gemäß <a href="privacy.html">Datenschutzerklärung</a> zu (notwendig für die Buchung).</span>
            </label>

            <div class="row between gap">
              <button type="button" class="btn ghost" data-back="3">Zurück</button>
              <button type="submit" class="btn">Weiter zur Anzahlung</button>
            </div>
          </form>
        </section>

        <section class="panel hidden" id="step5">
          <h3>Anzahlung (optional)</h3>
          <p class="muted">Mit Login kannst du die Anzahlung direkt online zahlen (Stripe). Als Gast bleibt die Anfrage ohne Online-Zahlung möglich.</p>
          <div class="card">
            <div class="summary" id="summary"></div>
            <div class="row gap">
              <button class="btn" id="payDeposit">Anzahlung online bezahlen</button>
              <button class="btn ghost" id="skipPay">Ohne Online-Zahlung anfragen</button>
            </div>
            <p class="fineprint">
              Storno: bis 7 Tage vorher kostenlos, danach keine Rückerstattung der Anzahlung.
            </p>
          </div>
          <div class="row between gap">
            <button class="btn ghost" data-back="4">Zurück</button>
            <a class="btn" href="home.html">Zur Startseite</a>
          </div>
        </section>

        <section class="panel hidden" id="done">
          <h3>✅ Anfrage gespeichert</h3>
          <p class="muted">Wir bestätigen deinen Termin per SMS/E‑Mail.</p>
          <div class="card">
            <div class="summary" id="doneSummary"></div>
            <div class="row gap">
              <button class="btn" id="downloadIcs">Kalender-Datei (.ics)</button>
              <a class="btn ghost" href="home.html">Fertig</a>
            </div>
          </div>
        </section>

      </div>

      <div class="hintbox">
        <div class="hintbox-title">Technischer Hinweis</div>
        <div class="muted">
          Für Auth, Stripe, SMS und E‑Mail wird ein API-Backend benötigt (z. B. Vercel Functions mit `/api/*`).
          Die Oberfläche kann weiterhin statisch bleiben.
        </div>
      </div>

    </div>
  </main>

  <footer class="footer">
    <div class="container footer-grid">
      <div class="footer-links">
        <a href="impressum.html">Impressum</a>
        <a href="privacy.html">Datenschutz</a>
      </div>
      <div class="muted">© <span id="year"></span> Parrylicious</div>
    </div>
  </footer>

  <script type="module" src="profile-menu.js"></script>
  <script type="module" src="booking.js"></script>
</body>
</html>
